
请从以下方式中选择适合您的方式进行部署。
所有部署方式都需要按照_QQ登录框架_、_主程序配置_的顺序进行，强烈建议您先查看**项目简介页**粗略了解程序结构。

<details>
<summary>🐋Docker部署</summary>

此方式仅支持使用mirai登录，若您不了解Docker相关知识及网络映射等问题，**请勿**使用Docker部署，我们**不会且难以**解决您主机上多个容器的连接问题。  
具体步骤请查看[此文档](https://github.com/RockChinQ/QChatGPT/blob/master/res/docs/docker_deploy.md)

</details>

<details>
<summary>🚀安装器部署</summary>

安装器支持`Windows`及`Linux`系统，仅支持使用mirai登录，请查看[此仓库](https://github.com/RockChinQ/qcg-installer)

</details>

<details>
<summary>⚒️手动部署</summary>

按照*QQ登录框架配置*、*主程序配置*的顺序进行。

### QQ登录框架

以下框架选择一个即可，总的来说，mirai功能完善，生态完整，QQ协议适配较好，但由于使用java编写资源占用较大，且需要额外配置插件，稍微复杂。  
而go-cqhttp对QQ协议的适配不比mirai好，但资源占用很低，且自带http接口，配置方便。

<details>
<summary>使用Mirai框架</summary>

我们需要先让**mirai本体**运行并成功登录QQ，再为其加载`mirai-api-http`插件以便 QChatGPT 能使用其功能。

<details>
<summary> 1️⃣安装mirai并登录QQ</summary>

1. 从[此处](https://github.com/iTXTech/mcl-installer/releases/latest)下载并运行`mcl-installer`以安装mirai，一路按回车即可

<details>
<summary> <i>输出类似这样</i> </summary>


```
PS C:\Softwares\mirai> .\mcl-installer-1.0.7-windows-amd64.exe
iTXTech MCL Installer 1.0.7 [OS: windows]
Licensed under GNU AGPLv3.
https://github.com/iTXTech/mcl-installer

iTXTech MCL and Java will be downloaded to "C:\Softwares\mirai"

Checking existing Java installation.
java version "1.8.0_321"
Java(TM) SE Runtime Environment (build 1.8.0_321-b07)
Java HotSpot(TM) 64-Bit Server VM (build 25.321-b07, mixed mode)

Would you like to install Java? (Y/N, default: Y)
Java version (8, 11, 17, 18), default: 17):
JRE or JDK (1: JRE, 2: JDK, default: JRE):
Binary Architecture (default: x64):
Fetching file list for jre version 17 on x64 from https://mirrors.tuna.tsinghua.edu.cn/Adoptium/17/jre/x64/windows/
Start Downloading: https://mirrors.tuna.tsinghua.edu.cn/Adoptium/17/jre/x64/windows/OpenJDK17U-jre_x64_windows_hotspot_17.0.7_7.zip
Downloading: 43401788/43401788
Extracting [373/373] jdk-17.0.7+7-jre/releaseappingsublic_suffix_list.datINFOFOINFOFOOFO_EXCEPTION_INFO
Testing Java Executable: C:\Softwares\mirai\java\bin\java.exe
openjdk version "17.0.7" 2023-04-18
OpenJDK Runtime Environment Temurin-17.0.7+7 (build 17.0.7+7)
OpenJDK 64-Bit Server VM Temurin-17.0.7+7 (build 17.0.7+7, mixed mode, sharing)

Fetching iTXTech MCL Package Info from https://mirai.mamoe.net/assets/mcl/org/itxtech/mcl/package.json
Mirai Console Loader 公告栏

如果在图片上传的时候遇到问题请与我们联系 (需要提供图片文件源本)
`- 如 Unsupported image type for ExternalResource *
`  considering use gif/png/bmp/jpg format.
`- Tracker: https://github.com/mamoe/mirai/issues/new/choose

常用资源整合
`- https://mirai.mamoe.net/topic/653

MCL 已推出 2.1.0，更好的支持 Mirai 2.11 的插件系统，建议更新。

The latest stable version of iTXTech MCL is 2.1.2
Would you like to download it? (Y/N, default: Y)
Start Downloading: https://maven.aliyun.com/repository/public/org/itxtech/mcl/2.1.2/mcl-2.1.2.zip
Downloading: 593097/593097
Extracting [5/5] mcl.jarmd
MCL startup script has been updated.
Use ".\mcl" to start MCL.

Press Enter to exit.
```

</details>

2. 运行`mcl`

<details>
<summary> <i>输出类似这样</i> </summary>

```
PS C:\Softwares\mirai> .\mcl
  22:54:01 [INFO] iTX Technologies Mirai Console Loader version 2.1.2-61c8bd8
  22:54:01 [INFO] Runtime: OpenJDK 64-Bit Server VM 17.0.7 (arch: 64)
  22:54:01 [INFO] https://github.com/iTXTech/mirai-console-loader
  22:54:01 [INFO] This program is licensed under GNU AGPL v3
  22:54:01 [INFO] MCL Addon is installed! Website: https://github.com/iTXTech/mcl-addon
  22:54:01 [WARN] To remove MCL Addon, run "./mcl --disable-module addon" and "./mcl --remove-package org.itxtech:mcl-addon"
  22:54:02 [INFO] Mirai Console Loader Announcement:
Mirai Console Loader 公告栏

如果在图片上传的时候遇到问题请与我们联系 (需要提供图片文件源本)
`- 如 Unsupported image type for ExternalResource *
`  considering use gif/png/bmp/jpg format.
`- Tracker: https://github.com/mamoe/mirai/issues/new/choose

常用资源整合
`- https://mirai.mamoe.net/topic/653

MCL 已推出 2.1.0，更好的支持 Mirai 2.11 的插件系统，建议更新。

  22:54:02 [INFO] Verifying "net.mamoe:mirai-console"
  22:54:03 [INFO] Updating "net.mamoe:mirai-console" to v2.14.0
 Downloading mirai-console-2.14.0-all.jar [==============================] 7.40 MB
 Downloading mirai-console-2.14.0-all.jar.sha1 [==============================] 40 B
  22:54:05 [INFO] Verifying "net.mamoe:mirai-console-terminal"
  22:54:06 [INFO] Updating "net.mamoe:mirai-console-terminal" to v2.14.0
 Downloading mirai-console-terminal-2.14.0-all.jar [==============================] 1.32 MB
 Downloading mirai-console-terminal-2.14.0-all.jar.sha1 [==============================] 40 B
  22:54:07 [INFO] Verifying "net.mamoe:mirai-core-all"
  22:54:07 [INFO] Updating "net.mamoe:mirai-core-all" to v2.14.0
 Downloading mirai-core-all-2.14.0-all.jar [==============================] 34.36 MB
 Downloading mirai-core-all-2.14.0-all.jar.sha1 [==============================] 40 B
  22:54:14 [INFO] Verifying "org.itxtech:mcl-addon"
  22:54:14 [INFO] Updating "org.itxtech:mcl-addon" to v2.1.1
 Downloading mcl-addon-2.1.1.jar [==============================] 57.22 KB
 Downloading mcl-addon-2.1.1.jar.sha1 [==============================] 40 B
2023-05-21 22:54:17 I/main: Starting mirai-console...
2023-05-21 22:54:17 I/main:

==================================[ Mirai consosle 2.14.0 ]===================================
 __       __ __                   __  ______                                      __
|  \     /  \  \                 |  \/      \                                    |  \
| ▓▓\   /  ▓▓\▓▓ ______   ______  \▓▓  ▓▓▓▓▓▓\ ______  _______   _______  ______ | ▓▓ ______
| ▓▓▓\ /  ▓▓▓  \/      \ |      \|  \ ▓▓   \▓▓/      \|       \ /       \/      \| ▓▓/      \
| ▓▓▓▓\  ▓▓▓▓ ▓▓  ▓▓▓▓▓▓\ \▓▓▓▓▓▓\ ▓▓ ▓▓     |  ▓▓▓▓▓▓\ ▓▓▓▓▓▓▓\  ▓▓▓▓▓▓▓  ▓▓▓▓▓▓\ ▓▓  ▓▓▓▓▓▓\
| ▓▓\▓▓ ▓▓ ▓▓ ▓▓ ▓▓   \▓▓/      ▓▓ ▓▓ ▓▓   __| ▓▓  | ▓▓ ▓▓  | ▓▓\▓▓    \| ▓▓  | ▓▓ ▓▓ ▓▓    ▓▓
| ▓▓ \▓▓▓| ▓▓ ▓▓ ▓▓     |  ▓▓▓▓▓▓▓ ▓▓ ▓▓__/  \ ▓▓__/ ▓▓ ▓▓  | ▓▓_\▓▓▓▓▓▓\ ▓▓__/ ▓▓ ▓▓ ▓▓▓▓▓▓▓▓
| ▓▓  \▓ | ▓▓ ▓▓ ▓▓      \▓▓    ▓▓ ▓▓\▓▓    ▓▓\▓▓    ▓▓ ▓▓  | ▓▓       ▓▓\▓▓    ▓▓ ▓▓\▓▓     \
 \▓▓      \▓▓\▓▓\▓▓       \▓▓▓▓▓▓▓\▓▓ \▓▓▓▓▓▓  \▓▓▓▓▓▓ \▓▓   \▓▓\▓▓▓▓▓▓▓  \▓▓▓▓▓▓ \▓▓ \▓▓▓▓▓▓▓


2023-05-21 22:54:17 I/main: Backend: version 2.14.0, built on 2023-02-06 14:25:21.
2023-05-21 22:54:17 I/main: Frontend Terminal: version 2.14.0, provided by Mamoe Technologies
2023-05-21 22:54:17 I/main: Welcome to visit https://mirai.mamoe.net/                                                                                                                                                          i2023-05-21 22:54:28 I/plugin: Successfully loaded plugin MCL Addon v2.1.1
2023-05-21 22:54:28 I/main: Prepared built-in commands: autoLogin, help, login, logout, permission, status, stop
2023-05-21 22:54:28 I/MCL Addon: iTXTech MCL Version: 2.1.2-61c8bd8
2023-05-21 22:54:29 W/MCL Addon: iTXTech Soyuz 未安装，Soyuz MCL Handler 特性已禁用
2023-05-21 22:54:29 I/main: 1 plugin(s) enabled.
2023-05-21 22:54:29 I/main: mirai-console started successfully.
>
```

</details>

3. 控制台输入`login <账号> <密码>`登录，不出意外一定是需要验证码的

```
> login 1438710740 xxxxxxxxx
2023-05-21 22:57:31 I/Bot.1438710740: Calculating type 2 PoW, it can take some time....
2023-05-21 22:57:31 I/Bot.1438710740: Got PoW result, cost: 78 ms
2023-05-21 22:57:31 I/Bot.1438710740: [SliderCaptcha] 需要滑动验证码, 请按照以下链接的步骤完成滑动验证码, 然后输入获取到的 ticket
2023-05-21 22:57:31 I/Bot.1438710740: [SliderCaptcha] Slider captcha required. Please solve the captcha with following link. Type ticket here after completion.
2023-05-21 22:57:31 I/Bot.1438710740: [SliderCaptcha] @see https://github.com/project-mirai/mirai-login-solver-selenium
2023-05-21 22:57:31 I/Bot.1438710740: [SliderCaptcha] @see https://docs.mirai.mamoe.net/mirai-login-solver-selenium/
2023-05-21 22:57:31 I/Bot.1438710740: [SliderCaptcha] 或者输入 TxCaptchaHelper 来使用 TxCaptchaHelper 完成滑动验证码
2023-05-21 22:57:31 I/Bot.1438710740: [SliderCaptcha] Or type `TxCaptchaHelper` to resolve slider captcha with TxCaptchaHelper.apk
2023-05-21 22:57:31 I/Bot.1438710740: [SliderCaptcha] Captcha link: https://ssl.captcha.qq.com/template/wireless_mqq_captcha.html?style=simple&aid=16&uin=1438710740&sid=2274146620405330267&cap_cd=UWF775AEIFXY8T4K4n-9Pcg5lCdKNzVRwA8zeHsRCkGDKp8LyIt4JQ**&clientype=1&apptype=2
LOGIN> >
```

4. 复制最后一段链接，到浏览器打开，右键空白处开启F12调试，切换到`网络`界面，滑动所有验证码，完成后查看网络包中一个叫`cap_union_new..`的包，点击查看`预览`，右键复制`ticket`值

![res/assets/login_verify.png](res/assets/login_verify.png)

5. 粘贴回mirai控制台，并按回车，完成后按照提示操作


</details>

</details>

</details>
